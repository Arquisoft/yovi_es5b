ifndef::imagesdir[:imagesdir: ../images]

[[section-deployment-view]]


== Vista de Despliegue

ifdef::arc42help[]
[role="arc42help"]
****
.Contenido
La vista de despliegue describe:

. La infraestructura técnica usada para ejecutar el sistema, con elementos de infraestructura como locaciones geográficas,
ambientes, computadoras, procesadores, canales y topologías de red así como otros elementos de infraestructura.
. El mapeo de los bloques de construcción (software) en dichos elementos de infraestructura.

Comúnmente los sistemas son ejecutados en diferentes ambientes, por ejemplo, ambiente de desarrollo, de pruebas, de producción. En dichos casos deberían documentarse todos los ambientes relevantes.

Deberá documentarse la vista de despliegue de manera especial cuando el software se ejecute como un sistema distribuido
con mas de una computadora, procesador, servidor o contenedor o cuando se diseñen los procesadores y chips de hardware propios.

Desde una perspectiva de software es suficiente con capturar los elementos de la infraestructura necesarios para mostrar
el despliegue de los bloques de construcción. Los arquitectos de hardware pueden ir más alla y describir la infraestructura
a cualquier nivel de detalle que requieran.

.Motivación
El software no corre sin haardware.
El hardware subyacente puede influenciar el sistema o algunos conceptos entrecruzados. Por ende, es necesario conocer
la infraestructura.

.Forma
Quizá el más alto nivel de diagrama de despliegue esté contenido en la sección 3.2. como contexto técnico con la 
propia infraestructura como UNA caja negra. En esta sección se deberá realizar un acercamiento a ésta caja negra 
utilizando diagramas de despliegue adicionales:

* UML provee diagramas de despliegue para expresar la vista. Uselos, probablemente con diagramas anidados.
* Cuando las partes relacionadas de Hardware prefieran otro tipo de diagramas además de los diagramas de despliegue,
permítales usar cualquier tipo que permita mostrar los nodos y canales de la infraestructura.
****
endif::arc42help[]

=== Nivel de infraestructura 1

ifdef::arc42help[]
[role="arc42help"]
****
Describa (Usualmente en una combinación de diagramas, tablas y texto):

* La distribución del sistema en múltiples ubicaciones, ambientes, computadoras, procesadores, ... así como las
conexiones físicas entre ellos
* La motivación o justificación de importancia para la estructura de despliegue
* Características de Calidad y/o rendimiento de la infraestructura
* El mapeo de los artefactos de software a los elementos de la infraestructura.

Para múltiples ambientes o despliegues alternativos copie esta sección para todos los ambientes relevantes.
****
endif::arc42help[]

[plantuml,"diagrama-despliegue-1",png]
----
_**<Diagrama General>**_
@startuml
node "<<device>> Servidor" {
node "Contenedor Docker Webapp" {
}


node "Contenedor Docker Gamey" {
}

node "Contenedor Docker Users" {
}

node "Contenedor Docker MySQL" {
}

component Gamey
component Users
Component Webapp

"Contenedor Docker Gamey" -[dashed]-> Gamey : <<manifest>>
"Contenedor Docker Users" -[dashed]-> Users : <<manifest>>
"Contenedor Docker Webapp" -[dashed]-> Webapp : <<manifest>>

"Users" -- "Contenedor Docker MySQL"
"Gamey" -0)- "Contenedor Docker Webapp" : "<<protocol>> TCP 4000"
"Users" -0)- "Contenedor Docker Webapp" : "<<protocol>> TCP 3000"
}

node "<<device>> Navegador web"

"Webapp" -- "<<device>> Navegador web" : "<<protocol>> HTTP 80"
actor Jugador
actor Bot
Jugador -- "<<device>> Navegador web"
Bot -- "Webapp" : "<<protocol>> HTTP 80"
@enduml
----

Motivación::

La infraestructura del sistema se divide en varios servicios desplegados en sendos contenedores Docker con el objetivo de conseguir una arquitectura modular que permita que cada servicio sea fácilmente reemplazable y desplegable en otra máquina o entorno.

Características de Calidad/Rendimiento::

- **Tolerancia a fallos**: un módulo concreto puede fallar sin que esto afecte al resto.
- **Modularidad**: los componentes pueden ser reemplazados de forma sencilla.
- **Reusabilidad**: componentes concretos pueden ser instalados en otros entornos de forma sencilla.
- **Coexistencia**: la infraestructura puede desplegarse correctamente en entornos que comportan otros productos.
- **Adaptabilidad**: la infraestructura puede ser desplegada en un sistema abstrayéndose de su configuración concreta.
- **Instalabilidad**: la infraestructura puede ser instalada de forma sencilla en un nuevo sistema.

Mapeo de los Bloques de Construcción a Infraestructura::
Cada módulo de la aplicación es desplegado en un contenedor Docker distinto. De la misma forma, el sistema gestor de bases de datos también es desplegado en su propio contenedor Docker.

A continuación se detalla el mapeo de artefactos de software a infraestructura.
[cols="1,1" options="header"]
|===
|** Artefacto** | **Infraestructura**
| Gamey | Contenedor Docker Gamey
| Users | Contenedor Docker Users
| Webapp | Contenedor Docker Webapp
| Base de datos | Contenedor Docker MySQL
|===

